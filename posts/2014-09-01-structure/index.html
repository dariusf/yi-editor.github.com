<!DOCTYPE HTML>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Overall Structure - Yi</title>

  <link rel="stylesheet" type="text/css" href="../../css/default.css" />

  <!-- jQuery & jQueryUI -->
  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css" />

  <!-- Pandoc Style CSS -->
  <link rel="stylesheet" type="text/css" href="../../css/syntax.css" />

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

  <!-- TOCify -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
  <link rel="stylesheet" type="text/css" href="../../css/tocify.css" />

</head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../">Yi</a>
    </div>
    <div class="navbar-collapse collapse navbar-right">
      <ul class="nav navbar-nav">
	<!-- TODO: Take in a list and loop through it -->
	<li><a href="../../">Home</a></li>
	<li><a href="../../pages/about/">About</a></li>
	<li><a href="../../pages/installing/">Install</a></li>
	<li><a href="../../pages/contact/">Contact</a></li>
	<li><a href="../../archive/">Archive</a></li>
      </ul>
    </div>
  </div>
</div>

    <div id="content" class="container">
        <h1>Overall Structure</h1>

        <div class="info">
    Posted on September  1, 2014
    
        by Jeanphilippe Bernardy
    
</div>

<p>In this post I’ll give a very high-level overview of Yi’s structure.</p>
<p>This the first part of a series that should eventually constitute a guide for Yi hacking… but let’s get going!</p>
<p>Yi code can be categorized into four parts:</p>
<ul>
<li><p>Actions, which are operations having some effect on the editor state. This can be opening or saving a file, or moving the cursor in the current buffer.</p></li>
<li><p>Keymaps, governing how user input maps to actions. Yi comes with keymaps for emacs and vi emulation, (and users are encouraged to write their own keymaps). Keymaps are very much like parsers, but they produce a stream of actions instead of a parse-tree.</p></li>
<li><p>UIs, which are responsible for rendering the editor state, and getting the stream of input events from the user. Yi comes with console, gtk and cocoa UI.</p></li>
<li><p>Glue code, to tie the knot between Keymaps and UI.</p></li>
</ul>
<p>The structure described above is very flexible: there is very low coupling between components. Indeed, one can easily swap out one component for another in the same category. For example, the user can choose between the different UIs and key-bindings at runtime.</p>
<p>The “actions” part makes up most of the editor code. This part is structured around a stack of three monadic DSLs.</p>
<ul>
<li><p>BufferM: A monad for all buffer-local operations, like insertion and deletion of text, and annotation of buffer contents. It can be understood as a monad that encapsulates the state of one buffer.</p></li>
<li><p>EditorM: A monad for editor-level operations, e.g., opening and closing windows and buffers. Operations involving more than one buffer are handled at this level too.</p></li>
<li><p>YiM: A monad for IO-level operations. There, one can operate on files, processes, etc. This is the only level where IO can be performed.</p></li>
</ul>
<p>All these parts are easily composable, and this makes convenient to extend (and configure) the editor. In the next post we’ll see in more detail how to do so.</p>

    </div>
    <div id="footer">
  Site proudly generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a>
  <p>Copyright (C) 2015-2017, Yi developers</p>
</div>

  </body>
</html>
